<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>BULOFK Games â€“ Canabalt</title>
  <style>
    /* Minimal fallback screen, shown only if the game export isn't found */
    html,body{
      height:100%;
      margin:0;
      font-family:Inter,system-ui,Segoe UI,Roboto,Arial;
      background:#000;
      color:#ddd;
      display:flex;
      align-items:center;
      justify-content:center;
    }
    .msg{
      max-width:740px;
      padding:18px;
      border-radius:8px;
      background:#0b0b0d;
      color:#cbd5e1;
      text-align:center;
      font-size:15px;
    }
    a{color:#1e90ff}
  </style>
</head>
<body>
  <div class="msg" id="msg" aria-live="polite" hidden>
    Game not found. Please upload a compiled HTML5 export (index.html + assets) into the repository root or into <code>export/html5/bin/</code>.
  </div>

<script>
(function(){
  // Probable paths where the compiled HTML5 build might be located (priority order)
  const candidates = [
    'export/html5/bin/index.html',
    'export/html5/index.html',
    'bin/index.html',
    'index.html',          // in case the export is already in the root
    'game/index.html',
    'dist/index.html'
  ];

  // Try to detect an existing playable build and redirect automatically
  // Some hosts block HEAD requests; use GET and fallback with mode:'no-cors'
  async function probeAndRedirect(){
    for (let path of candidates){
      try {
        // Try regular fetch first
        const resp = await fetch(path, { method: 'GET' });
        if (resp && (resp.ok || resp.type === 'opaque')) {
          // Found a playable build, redirect immediately
          window.location.replace(path);
          return;
        }
      } catch(e){
        // If CORS or network issues occur, try again with no-cors
        try {
          const r2 = await fetch(path, { method: 'GET', mode: 'no-cors' });
          if (r2 && (r2.type === 'opaque')) {
            window.location.replace(path);
            return;
          }
        } catch(e2){
          // Ignore and continue checking other paths
        }
      }
    }

    // If no playable build was found, show message to user/developer
    const msg = document.getElementById('msg');
    msg.hidden = false;
    msg.innerHTML = 'Game not found. Please upload compiled HTML5 export (index.html + assets) to repository root or to <code>export/html5/bin/</code>.';
  }

  // Run immediately on page load
  probeAndRedirect();
})();
</script>
</body>
</html>
